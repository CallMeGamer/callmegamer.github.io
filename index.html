<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CallMeGamer GameHub - Login</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(to right, #9f7aea, #ed64a6);
        }

        .container {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .title {
            font-size: 2rem;
            color: #2d3748;
            margin-bottom: 1.5rem;
        }

        .description {
            color: #718096;
            margin-bottom: 1.5rem;
        }

        /* Google Button Styling */
        .google-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background-color: white;
            border: 1px solid #e2e8f0;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            color: #4a5568;
            transition: background-color 0.3s;
            width: 100%;
            margin-bottom: 20px;
        }

        .google-btn:hover {
            background-color: #f7fafc;
        }

        .google-icon {
            width: 20px;
            height: 20px;
        }

        /* Disclaimer Styling */
        .disclaimer {
            font-size: 0.9rem;
            color: #555;
            margin-top: 20px;
            line-height: 1.4;
            text-align: left;
        }
    </style>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAxlEBkfszBkZt6BVezv4_oS9_paOz9NXs",
            authDomain: "callmegamergamehub.firebaseapp.com",
            projectId: "callmegamergamehub",
            storageBucket: "callmegamergamehub.appspot.com",
            messagingSenderId: "640120758569",
            appId: "1:640120758569:web:11370e01ffacdf2c1b1738",
            databaseURL: "https://callmegamergamehub-default-rtdb.firebaseio.com/"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();
        const db = getDatabase(app);

        // Handle Google sign-in
        document.getElementById('googleSignInBtn').addEventListener('click', () => {
            signInWithPopup(auth, provider)
                .then((result) => {
                    const user = result.user;
                    const userId = user.uid;

                    // Store user info in the database
                    set(ref(db, 'users/' + userId), {
                        username: user.displayName,
                        email: user.email,
                        currency: 100  // Starting currency for new users
                    });

                    // Redirect to dashboard after login (no .html)
                    window.location.href = 'dashboard';
                })
                .catch((error) => {
                    console.error("Error signing in:", error);
                });
        });

        // Check if user is already logged in
        auth.onAuthStateChanged((user) => {
            if (user) {
                // If user is already logged in, redirect to the dashboard
                window.location.href = 'dashboard';
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <h1 class="title">Welcome to CallMeGamer GameHub</h1>
        <p class="description">Sign in to access your gaming dashboard</p>
        <!-- Sign in with Google Button -->
        <div class="google-btn" id="googleSignInBtn">
            <img class="google-icon" src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="Google Icon">
            Sign in with Google
        </div>

        <!-- Disclaimer -->
        <p class="disclaimer">
            <strong>Disclaimer:</strong> This game site is currently undergoing changes. Please expect that some features may be limited, not work properly, or not be available yet. We appreciate your patience as we work on improving the experience!
        </p>
    </div>
</body>
</html>
